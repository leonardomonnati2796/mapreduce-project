# MapReduce Project Environment Configuration
# Copy this file to .env and modify the values as needed

# =============================================================================
# DEPLOYMENT CONFIGURATION
# =============================================================================
DEPLOYMENT_ENV=local
LOCAL_MODE=true

# =============================================================================
# PORT CONFIGURATION
# =============================================================================

# Core Service Ports
RAFT_PORT=1234
RPC_PORT=8000
WORKER_PORT=8081
DASHBOARD_PORT=8080

# Health Check Ports
HEALTH_PORT=8100

# Load Balancer Ports
NGINX_PORT=80
NGINX_SSL_PORT=443

# Database Ports
REDIS_PORT=6379

# Monitoring Ports
PROMETHEUS_PORT=9090
GRAFANA_PORT=3000

# =============================================================================
# MULTI-INSTANCE PORT CONFIGURATION
# =============================================================================

# Master Ports (for multiple masters)
RAFT_PORT_0=1234
RAFT_PORT_1=1235
RAFT_PORT_2=1236
RPC_PORT_0=8000
RPC_PORT_1=8001
RPC_PORT_2=8002
HEALTH_PORT_0=8100
HEALTH_PORT_1=8101
HEALTH_PORT_2=8102

# Worker Ports (for multiple workers)
WORKER_PORT_1=8081
WORKER_PORT_2=8082
WORKER_PORT_3=8083

# =============================================================================
# NETWORK CONFIGURATION
# =============================================================================

# For local development (localhost addresses)
RAFT_ADDRESSES=master0:1234,master1:1235,master2:1236
RPC_ADDRESSES=master0:8000,master1:8001,master2:8002
WORKER_ADDRESSES=worker1:8081,worker2:8082,worker3:8083

# For AWS deployment (will be set dynamically by user_data.sh)
# RAFT_ADDRESSES=10.0.1.10:1234,10.0.1.11:1235,10.0.1.12:1236
# RPC_ADDRESSES=10.0.1.10:8000,10.0.1.11:8001,10.0.1.12:8002
# WORKER_ADDRESSES=10.0.2.10:8081,10.0.2.11:8082,10.0.2.12:8083

# Instance Information
MY_PRIVATE_IP=localhost
MASTER_IPS=master0,master1,master2
WORKER_IPS=worker1,worker2,worker3

# =============================================================================
# TIMEOUT CONFIGURATION
# =============================================================================

# Task Configuration
TASK_TIMEOUT=15s
TASK_MONITOR_INTERVAL=2s
TASK_RETRY_DELAY=2s

# Worker Configuration
WORKER_RETRY_DELAY=5s
WORKER_HEARTBEAT_INTERVAL=10s

# Master Configuration
MAIN_LOOP_TIMEOUT=5m
TICKER_INTERVAL=2s
LEADER_ELECTION_DELAY=2s
CLUSTER_MANAGEMENT_DELAY=2s
CLUSTER_MONITOR_INTERVAL=10s
FILE_VALIDATION_INTERVAL=10s

# Raft Configuration
RAFT_STABILIZATION_DELAY=10s
RAFT_INITIALIZATION_DELAY=2s
RAFT_MONITOR_INTERVAL=1s

# =============================================================================
# HEALTH CHECK CONFIGURATION
# =============================================================================

# Health Check Thresholds
CPU_THRESHOLD=80
MEMORY_THRESHOLD=85
DISK_THRESHOLD=90

# Health Check Intervals
HEALTH_CHECK_INTERVAL=30s
HEALTH_CHECK_TIMEOUT=10s
HEALTH_CHECK_RETRIES=3

# =============================================================================
# RATE LIMITING CONFIGURATION
# =============================================================================

# API Rate Limiting
API_RATE_LIMIT=10r/s
API_RATE_BURST=50
DASHBOARD_RATE_LIMIT=5r/s
DASHBOARD_RATE_BURST=20

# =============================================================================
# S3 CONFIGURATION
# =============================================================================

# S3 Sync Configuration
S3_SYNC_ENABLED=false
S3_SYNC_INTERVAL=5m
S3_BUCKET_NAME=mapreduce-backup
S3_REGION=us-east-1

# S3 Monitoring
S3_ALERT_STORAGE_USAGE_THRESHOLD=80
S3_ALERT_ERROR_RATE_THRESHOLD=5

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================

# Log Levels
LOG_LEVEL=info
LOG_FORMAT=json

# Log Files
LOG_FILE=logs/mapreduce.log
LOG_MAX_SIZE=100MB
LOG_MAX_BACKUPS=5
LOG_MAX_AGE=30

# =============================================================================
# DOCKER CONFIGURATION
# =============================================================================

# Docker Environment
DOCKER_ENV=true
DOCKER_NETWORK=mapreduce-net

# Docker Volumes
TMP_PATH=/tmp/mapreduce
DATA_PATH=/root/data
OUTPUT_PATH=/tmp/mapreduce/output

# =============================================================================
# AWS CONFIGURATION
# =============================================================================

# AWS Region
AWS_REGION=us-east-1

# AWS Instance Configuration
INSTANCE_TYPE=t3.medium
MIN_INSTANCES=2
MAX_INSTANCES=10
DESIRED_INSTANCES=3

# AWS Load Balancer
ALB_PORT=80
ALB_SSL_PORT=443

# AWS Auto Scaling
TARGET_CPU_UTILIZATION=70
TARGET_MEMORY_UTILIZATION=80

# =============================================================================
# MONITORING CONFIGURATION
# =============================================================================

# Prometheus Configuration
PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=9090
PROMETHEUS_PATH=/metrics

# Grafana Configuration
GRAFANA_ENABLED=true
GRAFANA_PORT=3000
GRAFANA_PATH=/grafana

# CloudWatch Configuration
CLOUDWATCH_ENABLED=true
CLOUDWATCH_LOG_GROUP=mapreduce-logs
CLOUDWATCH_LOG_STREAM=mapreduce-stream
